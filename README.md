# oscript-images
Всё для сборки Docker-образов движка [OneScript](https://oscript.io/) и некоторых утилит на OneScript

Сборка происходит в GitHub Actions, чтобы максимально снизить порог входа и упростить вашу жизнь. 

Необходимо выполнить [подготовительные шаги](#подготовительные-шаги) и шаги сборки требуемых вам утилит.

## Оглавление

- [oscript-images](#oscript-images)
- [Подготовительные шаги](#подготовительные-шаги)
- [yard](#yard)

## Подготовительные шаги

1. **Форкните** [этот репозиторий](https://github.com/pravets/oscript-images/).

1. **Включите GitHub Actions**
   - Перейдите во вкладку "Actions" в вашем форке и разрешите запуск workflow.

1. **Добавьте секреты для Docker Hub**
   - В настройках репозитория (Settings → Secrets and variables → Actions) добавьте переменные:
     - `DOCKER_REGISTRY_URL` — адрес реестра (например, `docker.io`)
     - `DOCKER_LOGIN` — ваш логин Docker Hub или в вашем приватном registry
     - `DOCKER_PASSWORD` — ваш пароль от вашего приватного registry или [токен Docker Hub](https://app.docker.com/settings/personal-access-tokens). Для Docker Hub нужны права Read и Write и рекомендуется использовать токен, вместо пароля.

    [↑ В начало](#oscript-images)

## yard

1. [**Выполните подготовительные шаги**](#подготовительные-шаги), если не сделали это ранее

1. **Добавьте тег `yard`**
   - Перейдите во вкладку "Tags" или используйте команду:
     ```bash
     git tag yard
     git push origin --tags
     ```
   - либо клонируйте репозиторий к себе на linux-хост (или используйте Github Codespaces) и запустите скрипт ./src/tag-yard-latest.sh, скрипт принудительно "перевесит" тег на последний коммит и запушит теги
   - Это необходимо для запуска сборки yard через GitHub Actions.

1. **Запустите сборку**
   - После пуша тега workflow автоматически соберёт и опубликует образ `yard` в ваш Docker Registry.
   - будет опубликован образ с тегом `latest`, а также с номерной версией собранного `yard`

1. **Проверьте результат**
   - Убедитесь, что образ появился в вашем реестре Docker Hub с тегом `yard` и соответствующей версией.

    [↑ В начало](#oscript-images)